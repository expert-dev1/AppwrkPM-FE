<Appwrk-layout-div>
  <ng-container *ngTemplateOutlet="mainLayout"></ng-container>
</Appwrk-layout-div>


<ng-template #mainLayout>
  <button routerLink="/secure/masterSetup/projects" mat-button color="primary"><span class="material-icons">
    keyboard_backspace
    </span>BACK TO PROJECT LIST</button>
  <form *ngIf="projectForm" [formGroup]="projectForm" class="example-form row mt-5">

    <div class="col-sm-12 col-md-6 col-lg-6">
      <div>
        <mat-form-field appearance="outline" class="example-full-width">
          <mat-label>Project name</mat-label>
          <input type="text" formControlName="name" matInput>
          <mat-error *ngIf="projectForm.get('name').errors?.required">
            Name is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="projectForm.get('name').errors?.unavailable">
            <div class="d-flex justify-content-start align-items-center">
              <span class="material-icons font-s-10 mr-1">
                warning
              </span>
              <span>
                Project name already in use
              </span>
            </div>
          </mat-error>
          <mat-hint align="end" *ngIf="projectNameStatus === 'VERIFIED'">
            <div class="d-flex justify-content-start align-items-center text-success">
              <span class="material-icons font-s-10 mr-1">
                check_circle
              </span>
              <span class="">
                Project name available.
              </span>
            </div>
          </mat-hint>
          <mat-hint align="end" *ngIf="projectNameStatus === 'CHECKING'">
            <div class="d-flex justify-content-start align-items-center text-warning">
              <span class="material-icons font-s-10 mr-1">
                hourglass_top
              </span>
              <span class="">
                checking project name.
              </span>
            </div>
          </mat-hint>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="example-full-width">
          <mat-label>Project start date</mat-label>
          <input matInput [matDatepicker]="projectstartdate" readonly="true" required="true" [min]="currentDate"
            formControlName="startDate">
          <mat-datepicker-toggle matSuffix [for]="projectstartdate">
          </mat-datepicker-toggle>
          <mat-datepicker #projectstartdate></mat-datepicker>
          <mat-error *ngIf="projectForm.controls.startDate.invalid">
            Start date is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="example-full-width">
          <mat-label>Project type (upwork/linkedIn)</mat-label>
          <mat-select formControlName="platformTypeId">
            <mat-option *ngFor="let type of platformList" value="{{type.id}}">{{type.name | titlecase}}</mat-option>
          </mat-select>
          <mat-error *ngIf="projectForm.controls.platformTypeId.invalid">
            Project type is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div>
        <div>
          <label id="example-radio-group-label">Project time</label>
          <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
            formControlName="timeType">
            <mat-radio-button class="example-radio-button" *ngFor="let status of projectTimeType"
              [value]="status.value">
              {{status.title}}
            </mat-radio-button>
            <mat-error *ngIf="projectForm.controls.timeType.invalid">
              Project time type is <strong>required</strong>
            </mat-error>
          </mat-radio-group>
        </div>
      </div>
      <div *ngIf="projectForm.controls.timeType.value == 'FIXED'">
        <mat-form-field appearance="outline" class="example-full-width">
          <mat-label>Amount</mat-label>
          <input formControlName="amount" matInput type="number">
        </mat-form-field>
      </div>
      <Appwrk-loading-button [text]="'Save'" [color]="'primary'" [loading]="loading" (onClickEvent)="submitForm($event)" ></Appwrk-loading-button>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-6">
      <div>
        <mat-form-field appearance="outline" class="example-full-width">
          <mat-label>Select Employees</mat-label>
          <mat-select multiple formControlName="employeeId">
            <mat-option *ngFor="let emp of employeeList" value="{{emp.id}}">{{emp.firstName}} ( {{emp.designation.name}}
              ) </mat-option>
          </mat-select>
          <mat-error *ngIf="projectForm.controls.employeeId.invalid">
            please select atleast one
          </mat-error>
        </mat-form-field>
      </div>

      <div class="mt-1">
        <label id="example-radio-group-label">Project current status</label>
        <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
          formControlName="status">
          <mat-radio-button class="example-radio-button" *ngFor="let type of projectStatusType" [value]="type.title">
            {{type.title | titlecase}}
          </mat-radio-button>
        </mat-radio-group>
      </div>
    </div>






  </form>
</ng-template>
